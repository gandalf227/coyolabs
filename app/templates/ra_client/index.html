{% extends "layouts/student_base.html" %}
{% set crumbs = [("Inicio", url_for('inventory.inventory_list')), ("RA", url_for('ra_client.ra_client_home'))] %}
{% block title %}RA cliente{% endblock %}
{% block extra_js %}
<script src="https://unpkg.com/html5-qrcode"></script>
<script src="{{ url_for('static', filename='app.js') }}"></script>
{% endblock %}
{% block content %}
<h1>RA MVP (Cliente ligero)</h1>
<div class="input-grid">
  <div><label>Base URL (PC en LAN)</label><input id="baseUrl" type="text" value="http://127.0.0.1:5000"></div>
  <div><label>API Key</label><input id="apiKey" type="text" placeholder="pega tu RA_API_KEY"></div>
  <div><label>User email</label><input id="userEmail" type="email" value="24310130@utpn.edu.mx"></div>
  <div><label>Material ID</label><input id="materialId" type="number" value="2"></div>
</div>
<p><button onclick="getMaterial()">GET Material</button> <button onclick="postEvent()">POST Evento (scan)</button></p>
<h2>Escaneo QR</h2>
<p><button onclick="startCamera()">Iniciar cámara</button> <button onclick="stopCamera()">Detener</button></p>
<div id="reader"></div>
<h2>Resultado</h2>
<div id="overlayCard" style="display:none; border:1px solid #ccc; padding:15px; width:420px; border-radius:8px;">
  <h3 id="matName"></h3>
  <p><strong>Laboratorio:</strong> <span id="matLab"></span></p>
  <p><strong>Ubicación:</strong> <span id="matLocation"></span></p>
  <p><strong>Piezas:</strong> <span id="matPieces"></span></p>
  <p><strong>Estado:</strong> <span id="matStatus"></span></p>
  <div id="scanStatus" style="margin-top:10px; font-weight:bold;"></div>
</div>
<pre id="out"></pre>
{% endblock %}
